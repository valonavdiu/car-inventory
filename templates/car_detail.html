
{% extends "base.html" %}
{% block content %}
  <div class="row g-4">
    <div class="col-md-6">
      {% set img = (car.images[0] if car.images and car.images|length > 0 else "https://picsum.photos/800/450?blur=2") %}
      <img class="img-fluid rounded shadow-sm" src="{{ img }}" alt="{{ car.make }} {{ car.model }}">
    </div>
    <div class="col-md-6">
      <h2 class="mb-1">{{ car.year }} {{ car.make }} {{ car.model }}</h2>
      <div class="mb-2 text-muted">
        {{ car.fuel or "" }} • {{ car.transmission or "" }} • {{ car.color or "" }} • {{ car.seats or "—" }} seats
      </div>
      <div class="mb-3">
        {% if car.type == "rent" %}
          <span class="badge text-bg-primary">Rent</span>
          <span class="fs-4 ms-2"><strong>{{ car.price_per_day }} €</strong>/day</span>
        {% else %}
          <span class="badge text-bg-dark">Sale</span>
          <span class="fs-4 ms-2"><strong>{{ car.price }} €</strong></span>
        {% endif %}
      </div>

      <div class="d-flex gap-2 mb-4">
        {% set phone = (car.contact.phone if car.contact and car.contact.phone else "+3556XXXXXXX") %}
        <a class="btn btn-success" href="https://wa.me/{{ phone | replace(' ', '') | replace('+','') }}?text=Hello!%20I%27m%20interested%20in%20{{ car.year }}%20{{ car.make }}%20{{ car.model }}">
          WhatsApp
        </a>
        <a class="btn btn-outline-dark" href="tel:{{ phone | replace(' ', '') }}">Call</a>
      </div>

      {% if car.odometer %}<div>Odometer: {{ "{:,}".format(car.odometer) }} km</div>{% endif %}
      {% if car.description %}<p class="mt-3">{{ car.description }}</p>{% endif %}
    </div>
  </div>

  {% if car.images and car.images|length > 1 %}
    <h4 class="mt-4">More photos</h4>
    <div class="row g-2">
      {% for url in car.images[1:] %}
        <div class="col-6 col-md-3"><img class="img-fluid rounded" src="{{ url }}" alt="photo"></div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
